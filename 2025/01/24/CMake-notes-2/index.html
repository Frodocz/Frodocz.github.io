<!DOCTYPE html>
<html lang="cn">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="CMakeæ•™ç¨‹ï¼ˆäºŒï¼‰ï¼šCMakeæµç¨‹æ§åˆ¶ä¸ä¾èµ–ç®¡ç†" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.jpg">
    <title>Cz | A Chinese coder now living in SG</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
            
<link rel="stylesheet" href="/css/waline.css">

        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
                transition: transform 0.3s ease-in-out; 
                border-radius: 50%; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.jpg" 
        />
        <div class="header-content">
            <a class="logo" href="/">Cz</a> 
            <span class="description">#define ME &#34;A coder&#34;</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">ğŸƒä¸»é¡µ</a></li>
            
        
            
                <li><a href="/list/">ğŸ–‹ï¸æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">ğŸ“Œæ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">ğŸ”–åˆ†ç±»</a></li>
            
        
            
                <li><a href="/about/">ğŸ™ˆå…³äº</a></li>
            
        
            
                <li><a href="/now/">ğŸ“†ç¢ç‰‡</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    CMakeæ•™ç¨‹ï¼ˆäºŒï¼‰ï¼šCMakeæµç¨‹æ§åˆ¶ä¸ä¾èµ–ç®¡ç†
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>æœ€è¿‘æ›´æ–°ï¼š2025-01-24</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>å­—æ•°æ€»è®¡ï¼š5.3k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š21åˆ†é’Ÿ</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        é˜…è¯»é‡ï¼š<span id="busuanzi_value_page_pv"></span>æ¬¡
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
        
        <div class=".article-gallery"><h2 id="1-å˜é‡æ“ä½œ"><a href="#1-å˜é‡æ“ä½œ" class="headerlink" title="1. å˜é‡æ“ä½œ"></a>1. å˜é‡æ“ä½œ</h2><h3 id="1-1-è¿½åŠ "><a href="#1-1-è¿½åŠ " class="headerlink" title="1.1 è¿½åŠ "></a>1.1 è¿½åŠ </h3><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬è®¨è®ºäº†å¤šæ–‡ä»¶ç®¡ç†ï¼Œä½†æœ‰æ—¶å€™é¡¹ç›®çš„æºæ–‡ä»¶å¹¶ä¸ä¸€å®šéƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ï¼Œè¿™äº›æºæ–‡ä»¶æœ€ç»ˆå´éœ€è¦ä¸€èµ·è¿›è¡Œç¼–è¯‘æ¥ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>file</code>å‘½ä»¤å¯¹å„ä¸ªç›®å½•ä¸‹çš„æºæ–‡ä»¶è¿›è¡Œæœç´¢ï¼Œæœ€åå†å°†å¾—åˆ°çš„æ–‡ä»¶ååšä¸€ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œå³å¯(ä½¿ç”¨<code>set</code>å‘½ä»¤æˆ–<code>list</code>å‘½ä»¤)ã€‚æ–‡ä»¶æœç´¢è¯¦è§ä¸‹ä¸€ç« èŠ‚ã€‚</p>
<h4 id="1-1-1-ä½¿ç”¨setæ‹¼æ¥"><a href="#1-1-1-ä½¿ç”¨setæ‹¼æ¥" class="headerlink" title="1.1.1 ä½¿ç”¨setæ‹¼æ¥"></a>1.1.1 ä½¿ç”¨setæ‹¼æ¥</h4><p>å¦‚æœä½¿ç”¨<code>set</code>è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯¹åº”çš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(å˜é‡å<span class="number">1</span> <span class="variable">$&#123;å˜é‡å1&#125;</span> <span class="variable">$&#123;å˜é‡å2&#125;</span> ...)</span><br></pre></td></tr></table></figure>
<p>å…³äºä¸Šé¢çš„å‘½ä»¤å…¶å®å°±æ˜¯å°†ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¾€åæ‰€æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œæœ€åå°†ç»“æœå­˜å‚¨åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸­åŸæ¥æœ‰æ•°æ®ä¼šå¯¹åŸæ•°æ®å°±è¡Œè¦†ç›–ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">TEST</span>)</span><br><span class="line"><span class="keyword">set</span>(TEMP <span class="string">&quot;hello,world&quot;</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_1 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/src1/*.cpp)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_2 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/src2/*.cpp)</span><br><span class="line"><span class="comment"># è¿½åŠ (æ‹¼æ¥)</span></span><br><span class="line"><span class="keyword">set</span>(SRC_1 <span class="variable">$&#123;SRC_1&#125;</span> <span class="variable">$&#123;SRC_2&#125;</span> <span class="variable">$&#123;TEMP&#125;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;message: $&#123;SRC_1&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-1-2-ä½¿ç”¨listæ‹¼æ¥"><a href="#1-1-2-ä½¿ç”¨listæ‹¼æ¥" class="headerlink" title="1.1.2 ä½¿ç”¨listæ‹¼æ¥"></a>1.1.2 ä½¿ç”¨listæ‹¼æ¥</h4><p>å¦‚æœä½¿ç”¨<code>list</code>è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯¹åº”çš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">list</span>(APPEND &lt;<span class="keyword">list</span>&gt; [&lt;element&gt; ...])</span><br></pre></td></tr></table></figure>
<p><code>list</code>å‘½ä»¤çš„åŠŸèƒ½æ¯”<code>set</code>è¦å¼ºå¤§ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥åªæ˜¯å®ƒçš„å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦åœ¨å®ƒç¬¬ä¸€ä¸ªå‚æ•°çš„ä½ç½®æŒ‡å®šå‡ºæˆ‘ä»¬è¦åšçš„æ“ä½œï¼Œ<code>APPEND</code>è¡¨ç¤ºè¿›è¡Œæ•°æ®è¿½åŠ ï¼Œåè¾¹çš„å‚æ•°å’Œ<code>set</code>ä¸€æ ·ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">TEST</span>)</span><br><span class="line"><span class="keyword">set</span>(TEMP <span class="string">&quot;hello,world&quot;</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_1 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/src1/*.cpp)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_2 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/src2/*.cpp)</span><br><span class="line"><span class="comment"># è¿½åŠ (æ‹¼æ¥)</span></span><br><span class="line"><span class="keyword">list</span>(APPEND SRC_1 <span class="variable">$&#123;SRC_1&#125;</span> <span class="variable">$&#123;SRC_2&#125;</span> <span class="variable">$&#123;TEMP&#125;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;message: $&#123;SRC_1&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>CMake</code>ä¸­ï¼Œä½¿ç”¨<code>set</code>å‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>list</code>ã€‚ä¸€ä¸ªåœ¨<code>list</code>å†…éƒ¨æ˜¯ä¸€ä¸ªç”±åˆ†å·<code>;</code>åˆ†å‰²çš„ä¸€ç»„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œ<code>set(var a b c d e)</code>å‘½ä»¤å°†ä¼šåˆ›å»ºä¸€ä¸ª<code>list:a;b;c;d;e</code>ï¼Œä½†æ˜¯æœ€ç»ˆæ‰“å°å˜é‡å€¼çš„æ—¶å€™å¾—åˆ°çš„æ˜¯<code>abcde</code>ã€‚</p>
<h3 id="1-2-å­—ç¬¦ä¸²ç§»é™¤"><a href="#1-2-å­—ç¬¦ä¸²ç§»é™¤" class="headerlink" title="1.2 å­—ç¬¦ä¸²ç§»é™¤"></a>1.2 å­—ç¬¦ä¸²ç§»é™¤</h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>file</code>æœç´¢æŸä¸ªç›®å½•å°±å¾—åˆ°äº†è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œä½†æ˜¯å…¶ä¸­æœ‰äº›æºæ–‡ä»¶å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">project/</span><br><span class="line">â”œâ”€â”€ main.cpp</span><br><span class="line">â”œâ”€â”€ helper1.cpp</span><br><span class="line">â”œâ”€â”€ helper2.cpp</span><br><span class="line">â””â”€â”€ CMakeLists.txt</span><br></pre></td></tr></table></figure>
<p>åœ¨å½“å‰ç›®å½•æœ‰ä¸‰ä¸ªæºæ–‡ä»¶ï¼Œå…¶ä¸­main.cppæ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠç›¸å…³çš„æºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªåŠ¨æ€åº“ç»™åˆ«äººä½¿ç”¨ï¼Œé‚£ä¹ˆåªéœ€è¦helper1.cppã€helper2.cppè¿™ä¸¤ä¸ªæºæ–‡ä»¶å°±å¯ä»¥äº†ã€‚æ­¤æ—¶ï¼Œå°±éœ€è¦å°†main.cppä»æœç´¢åˆ°çš„æ•°æ®ä¸­å‰”é™¤å‡ºå»ã€‚æƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>list</code>ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">list</span>(REMOVE_ITEM &lt;<span class="keyword">list</span>&gt; &lt;value&gt; [&lt;value&gt; ...])</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé¢çš„å‘½ä»¤åŸå‹å¯ä»¥çœ‹åˆ°åˆ é™¤å’Œè¿½åŠ æ•°æ®ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°å˜æˆäº†<code>REMOVE_ITEM</code>ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">TEST</span>)</span><br><span class="line"><span class="keyword">set</span>(TEMP <span class="string">&quot;hello,world&quot;</span>)</span><br><span class="line"><span class="keyword">file</span>(GLOB SRC_1 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/*.cpp)</span><br><span class="line"><span class="comment"># ç§»é™¤å‰æ—¥å¿—</span></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;message: $&#123;SRC_1&#125;&quot;</span>)</span><br><span class="line"><span class="comment"># ç§»é™¤ main.cpp</span></span><br><span class="line"><span class="keyword">list</span>(REMOVE_ITEM SRC_1 <span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/main.cpp)</span><br><span class="line"><span class="comment"># ç§»é™¤åæ—¥å¿—</span></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;message: $&#123;SRC_1&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>å…³äº<code>list</code>çš„å…¶ä»–æ“ä½œï¼Œè¯¦è§<a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/command/list.html"><code>list</code></a>å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h2 id="2-æ–‡ä»¶æœç´¢"><a href="#2-æ–‡ä»¶æœç´¢" class="headerlink" title="2. æ–‡ä»¶æœç´¢"></a>2. æ–‡ä»¶æœç´¢</h2><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬è®¨è®ºäº†å¤šæ–‡ä»¶ç®¡ç†ï¼Œä½¿ç”¨<code>set</code>å‘½ä»¤å°†ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶è®¾ç½®ä¸ºå˜é‡ã€‚ä½†æœ‰æ—¶æˆ‘ä»¬åœ¨ç¼–å†™<code>CMakeLists.txt</code>æ—¶ï¼Œä¸€ä¸€ç½—åˆ—è€—æ—¶ä¸”å®¹æ˜“å‡ºç°é”™è¯¯ï¼Œ<code>CMake</code>æä¾›äº†<code>aux_source_directory</code>å’Œ<code>file</code>å‘½ä»¤ï¼Œå¸®åŠ©æˆ‘ä»¬æœç´¢æ–‡ä»¶ï¼Œé¿å…æ‰‹åŠ¨è¾“å…¥ã€‚</p>
<h3 id="2-1-aux-source-directory"><a href="#2-1-aux-source-directory" class="headerlink" title="2.1 aux_source_directory"></a>2.1 aux_source_directory</h3><p>åœ¨ CMake ä¸­ä½¿ç”¨aux_source_directory å‘½ä»¤å¯ä»¥æŸ¥æ‰¾æŸä¸ªè·¯å¾„ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œå‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">aux_source_directory</span>(&lt;dir&gt; &lt;variable&gt;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>dir</code>ï¼šè¦æœç´¢çš„ç›®å½•</li>
<li><code>variable</code>ï¼šå°†ä»<code>dir</code>ç›®å½•ä¸‹æœç´¢åˆ°çš„æºæ–‡ä»¶åˆ—è¡¨å­˜å‚¨åˆ°è¯¥å˜é‡ä¸­</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(MyProject)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PROJECT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"><span class="comment"># æœç´¢ src ç›®å½•ä¸‹çš„æºæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(<span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src SRC_LIST)</span><br><span class="line"><span class="keyword">add_executable</span>(hello <span class="variable">$&#123;SRC_LIST&#125;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-2-file"><a href="#2-2-file" class="headerlink" title="2.2 file"></a>2.2 file</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">file</span>(GLOB/GLOB_RECURSE å˜é‡å è¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç±»å‹)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>GLOB</code>: å°†æŒ‡å®šç›®å½•ä¸‹æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­ã€‚</li>
<li><code>GLOB_RECURSE</code>ï¼šé€’å½’æœç´¢æŒ‡å®šç›®å½•ï¼Œå°†æœç´¢åˆ°çš„æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶åç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ°å˜é‡ä¸­ã€‚</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(MyProject)</span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_SRC <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/src/*.cpp)</span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_HEAD <span class="variable">$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>/*.h)</span><br><span class="line"><span class="comment"># å…³äºè¦æœç´¢çš„æ–‡ä»¶è·¯å¾„å’Œç±»å‹å¯åŠ åŒå¼•å·ï¼Œä¹Ÿå¯ä¸åŠ :</span></span><br><span class="line"><span class="keyword">file</span>(GLOB MAIN_HEAD2 <span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/include/*.h&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(hello <span class="variable">$&#123;MAIN_SRC&#125;</span>)</span><br></pre></td></tr></table></figure>
<p><code>CMAKE_CURRENT_SOURCE_DIR</code>å®è¡¨ç¤ºå½“å‰è®¿é—®çš„<code>CMakeLists.txt</code>æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ã€‚</p>
<h2 id="3-æµç¨‹æ§åˆ¶"><a href="#3-æµç¨‹æ§åˆ¶" class="headerlink" title="3. æµç¨‹æ§åˆ¶"></a>3. æµç¨‹æ§åˆ¶</h2><p>å½“é¡¹ç›®å˜å¾—å¤æ‚æ—¶ï¼Œ<code>CMake</code>éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶åšå‡ºé€‰æ‹©ã€‚ä¸ºæ­¤ï¼Œ<code>CMake</code>æä¾›æµç¨‹æ§åˆ¶è¯­æ³•ï¼Œå¯ä»¥åƒ<code>shell</code>è„šæœ¬ä¸€æ ·è¿›è¡Œ<code>æ¡ä»¶åˆ¤æ–­</code>å’Œ<code>å¾ªç¯</code>ã€‚</p>
<h3 id="3-1-æ¡ä»¶åˆ¤æ–­"><a href="#3-1-æ¡ä»¶åˆ¤æ–­" class="headerlink" title="3.1 æ¡ä»¶åˆ¤æ–­"></a>3.1 æ¡ä»¶åˆ¤æ–­</h3><p>æ¡ä»¶åˆ¤æ–­è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;condition&gt;)</span><br><span class="line">    &lt;<span class="keyword">command</span>&gt;</span><br><span class="line"><span class="keyword">elseif</span>(&lt;condition&gt;) <span class="comment"># optionalï¼Œå¯é‡å¤</span></span><br><span class="line">    &lt;<span class="keyword">command</span>&gt;</span><br><span class="line"><span class="keyword">else</span>()              <span class="comment"># optional</span></span><br><span class="line">    &lt;<span class="keyword">command</span>&gt;</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿›è¡Œæ¡ä»¶åˆ¤æ–­çš„æ—¶å€™ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¡ä»¶ï¼Œå¯ä»¥å†™å¤šä¸ª<code>elseif</code>ï¼Œæœ€åä¸€ä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨<code>else</code>ã€‚ä½†æ˜¯å¼€å§‹å’Œç»“æŸå¿…é¡»æˆå¯¹å‡ºç°ï¼Œåˆ†åˆ«ä¸º<code>if</code>å’Œ<code>endif</code>ã€‚</p>
<h4 id="3-1-1-åŸºæœ¬æ¡ä»¶è¡¨è¾¾å¼"><a href="#3-1-1-åŸºæœ¬æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="3.1.1 åŸºæœ¬æ¡ä»¶è¡¨è¾¾å¼"></a>3.1.1 åŸºæœ¬æ¡ä»¶è¡¨è¾¾å¼</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;expression&gt;)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯åŸºæœ¬è¡¨è¾¾å¼ï¼Œ<code>expression</code>æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š<code>å¸¸é‡</code>ã€<code>å˜é‡</code>ã€<code>å­—ç¬¦ä¸²</code>ã€‚</p>
<ul>
<li>å¦‚æœæ˜¯<code>1</code>ï¼Œ<code>ON</code>ï¼Œ<code>YES</code>ï¼Œ<code>TRUE</code>ï¼Œ<code>Y</code>ï¼Œ<code>éé›¶å€¼</code>ï¼Œ<code>éç©ºå­—ç¬¦ä¸²</code>æ—¶ï¼Œæ¡ä»¶åˆ¤æ–­è¿”å›<code>True</code></li>
<li>å¦‚æœæ˜¯<code>0</code>ï¼Œ<code>OFF</code>ï¼Œ<code>NO</code>ï¼Œ<code>FALSE</code>ï¼Œ<code>N</code>ï¼Œ<code>IGNORE</code>ï¼Œ<code>NOTFOUND</code>ï¼Œ<code>ç©ºå­—ç¬¦ä¸²</code>æ—¶ï¼Œæ¡ä»¶åˆ¤æ–­è¿”å›<code>False</code></li>
</ul>
<h4 id="3-1-2-é€»è¾‘åˆ¤æ–­"><a href="#3-1-2-é€»è¾‘åˆ¤æ–­" class="headerlink" title="3.1.2 é€»è¾‘åˆ¤æ–­"></a>3.1.2 é€»è¾‘åˆ¤æ–­</h4><ul>
<li><code>NOT</code>ï¼šå–åæ“ä½œï¼Œæ¡ä»¶<code>condition</code>ä¸º<code>True</code>åˆ™è¿”å›<code>False</code>ï¼Œæ¡ä»¶<code>condition</code>ä¸º<code>False</code>åˆ™è¿”å›<code>True</code></li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> &lt;condition&gt;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>AND</code>ï¼šä¸æ“ä½œï¼Œæ¡ä»¶<code>cond1</code>å’Œ<code>cond2</code>åŒæ—¶ä¸º<code>True</code>åˆ™è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;cond1&gt; <span class="keyword">AND</span> &lt;cond2&gt;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>OR</code>ï¼šæˆ–æ“ä½œï¼Œæ¡ä»¶<code>cond1</code>å’Œ<code>cond2</code>è‡³å°‘ä¸€ä¸ªä¸º<code>True</code>åˆ™è¿”å›<code>True</code>ï¼Œå¦‚æœä¸¤ä¸ªæ¡ä»¶å‡ä¸º<code>False</code>åˆ™è¿”å›<code>False</code></li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;cond1&gt; <span class="keyword">OR</span> &lt;cond2&gt;)</span><br></pre></td></tr></table></figure>

<h4 id="3-1-3-æ¯”è¾ƒ"><a href="#3-1-3-æ¯”è¾ƒ" class="headerlink" title="3.1.3 æ¯”è¾ƒ"></a>3.1.3 æ¯”è¾ƒ</h4><h5 id="1-åŸºäºæ•°å€¼çš„æ¯”è¾ƒ"><a href="#1-åŸºäºæ•°å€¼çš„æ¯”è¾ƒ" class="headerlink" title="(1) åŸºäºæ•°å€¼çš„æ¯”è¾ƒ"></a>(1) åŸºäºæ•°å€¼çš„æ¯”è¾ƒ</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">LESS</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">GREATER</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">EQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">LESS_EQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">GREATER_EQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>LESS</code>ï¼šå¦‚æœå·¦ä¾§æ•°å€¼<code>å°äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>GREATER</code>ï¼šå¦‚æœå·¦ä¾§æ•°å€¼<code>å¤§äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>EQUAL</code>ï¼šå¦‚æœå·¦ä¾§æ•°å€¼<code>ç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>LESS_EQUAL</code>ï¼šå¦‚æœå·¦ä¾§æ•°å€¼<code>å°äºç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>GREATER_EQUAL</code>ï¼šå¦‚æœå·¦ä¾§æ•°å€¼<code>å¤§äºç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
</ul>
<h5 id="2-åŸºäºå­—ç¬¦ä¸²çš„æ¯”è¾ƒ"><a href="#2-åŸºäºå­—ç¬¦ä¸²çš„æ¯”è¾ƒ" class="headerlink" title="(2) åŸºäºå­—ç¬¦ä¸²çš„æ¯”è¾ƒ"></a>(2) åŸºäºå­—ç¬¦ä¸²çš„æ¯”è¾ƒ</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STRLESS</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STRGREATER</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STREQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STRLESS_EQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STRGREATER_EQUAL</span> &lt;variable|<span class="keyword">string</span>&gt;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>STRLESS</code>ï¼šå¦‚æœå·¦ä¾§å­—ç¬¦ä¸²<code>å°äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>STRGREATER</code>ï¼šå¦‚æœå·¦ä¾§å­—ç¬¦ä¸²<code>å¤§äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>STREQUAL</code>ï¼šå¦‚æœå·¦ä¾§å­—ç¬¦ä¸²<code>ç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>STRLESS_EQUAL</code>ï¼šå¦‚æœå·¦ä¾§å­—ç¬¦ä¸²<code>å°äºç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
<li><code>STRGREATER_EQUAL</code>ï¼šå¦‚æœå·¦ä¾§å­—ç¬¦ä¸²<code>å¤§äºç­‰äº</code>å³ä¾§ï¼Œè¿”å›<code>True</code></li>
</ul>
<h4 id="3-1-4-æ–‡ä»¶æ“ä½œ"><a href="#3-1-4-æ–‡ä»¶æ“ä½œ" class="headerlink" title="3.1.4 æ–‡ä»¶æ“ä½œ"></a>3.1.4 æ–‡ä»¶æ“ä½œ</h4><ol>
<li>åˆ¤æ–­æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">EXISTS</span> path-to-<span class="keyword">file</span>-<span class="keyword">or</span>-directory)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•ï¼Œ<u>æ­¤å¤„ç›®å½•çš„<code>path</code>å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</u>ã€‚ç›®å½•å­˜åœ¨åˆ™è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">IS_DIRECTORY</span> path)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>åˆ¤æ–­æ˜¯å¦æ˜¯è½¯é“¾æ¥ï¼Œ<u>æ­¤å¤„<code>file-name</code>å¯¹åº”çš„è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</u>ã€‚è½¯é“¾æ¥å­˜åœ¨åˆ™è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">IS_SYMLINK</span> <span class="keyword">file</span>-name)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>åˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„</li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">IS_ABSOLUTE</span> path)</span><br></pre></td></tr></table></figure>
<ul>
<li>å…³äºç»å¯¹è·¯å¾„ï¼š<ul>
<li>å¦‚æœæ˜¯<code>Linux</code>ï¼Œè¯¥è·¯å¾„éœ€è¦ä»æ ¹ç›®å½•å¼€å§‹æè¿°</li>
<li>å¦‚æœæ˜¯<code>Windows</code>ï¼Œè¯¥è·¯å¾„éœ€è¦ä»ç›˜ç¬¦å¼€å§‹æè¿°</li>
</ul>
</li>
<li>å¦‚æœæ˜¯ç»å¯¹è·¯å¾„è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ul>
<h4 id="3-1-5-å…¶ä»–"><a href="#3-1-5-å…¶ä»–" class="headerlink" title="3.1.5 å…¶ä»–"></a>3.1.5 å…¶ä»–</h4><ol>
<li>åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ã€‚<u><code>CMake</code>ç‰ˆæœ¬è¦æ±‚<code>&gt;=3.3</code></u>ï¼Œå…ƒç´ åœ¨åˆ—è¡¨ä¸­è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">IN_LIST</span> &lt;variable&gt;)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åˆ¤æ–­ä¸¤ä¸ªè·¯å¾„æ˜¯å¦ç›¸ç­‰ã€‚<u><code>CMake</code>ç‰ˆæœ¬è¦æ±‚<code>&gt;=3.4</code></u>ï¼Œè·¯å¾„ç›¸ç­‰è¿”å›<code>True</code>ï¼Œå¦åˆ™è¿”å›<code>False</code></li>
</ol>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; PATH_EQUAL &lt;variable&gt;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·¯å¾„æ¯”è¾ƒä¸å­—ç¬¦ä¸²æ¯”è¾ƒç­‰ä»·ï¼Œå¦‚æœè·¯å¾„æ ¼å¼ä¹¦å†™æ²¡æœ‰é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ç§æ–¹å¼è¿›è¡Œæ¯”è¾ƒï¼š</span></span><br><span class="line"><span class="keyword">if</span>(&lt;variable|<span class="keyword">string</span>&gt; <span class="keyword">STREQUAL</span> &lt;variable&gt;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#[[æˆ‘ä»¬åœ¨ä¹¦å†™æŸä¸ªè·¯å¾„çš„æ—¶å€™ï¼Œå¯èƒ½ç”±äºè¯¯æ“ä½œä¼šå¤šå†™å‡ ä¸ªåˆ†éš”ç¬¦ï¼Œæ¯”å¦‚æŠŠ`/a/b/c`å†™æˆ`/a//b///c`</span></span><br><span class="line"><span class="comment">   åœ¨è¿›è¡Œè·¯å¾„æ¯”è¾ƒçš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨ PATH_EQUAL å¯ä»¥è‡ªåŠ¨å‰”é™¤è·¯å¾„ä¸­å¤šä½™çš„åˆ†å‰²çº¿ç„¶åå†è¿›è¡Œè·¯å¾„çš„å¯¹æ¯”</span></span><br><span class="line"><span class="comment">   ä½¿ç”¨ STREQUAL åˆ™åªèƒ½è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒã€‚æ¯”å¦‚ï¼š</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;/home//frodocz///Linux&quot;</span> PATH_EQUAL <span class="string">&quot;/home/frodocz/Linux&quot;</span>)</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;same path&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;different path&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;=============&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;/home//frodocz///Linux&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;/home/frodocz/Linux&quot;</span>)</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;same path&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;different path&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºæ—¥å¿—ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">same path</span><br><span class="line">=============</span><br><span class="line">different path</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/command/if.html">æ›´å¤šå…³äº<code>if</code>çš„æ¡ä»¶åˆ¤æ–­è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p>
<h3 id="3-2-å¾ªç¯"><a href="#3-2-å¾ªç¯" class="headerlink" title="3.2 å¾ªç¯"></a>3.2 å¾ªç¯</h3><p>åœ¨<code>CMake</code>ä¸­å¾ªç¯æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>foreach</code>å’Œ<code>while</code>ã€‚</p>
<h4 id="3-2-1-foreach"><a href="#3-2-1-foreach" class="headerlink" title="3.2.1 foreach"></a>3.2.1 foreach</h4><p>ä½¿ç”¨foreachå¾ªç¯ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(&lt;loop_var&gt; &lt;items&gt;)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>foreach</code>æˆ‘ä»¬å¯ä»¥å¯¹<code>items</code>ä¸­çš„æ•°æ®è¿›è¡Œéå†ï¼Œç„¶åé€šè¿‡<code>loop_var</code>å°†éå†åˆ°çš„å½“å‰çš„å€¼å–å‡ºï¼Œåœ¨å–å€¼çš„æ—¶å€™æœ‰ä»¥ä¸‹å‡ ç§ç”¨æ³•ï¼š</p>
<h5 id="æ–¹æ³•ï¼ˆ1ï¼‰"><a href="#æ–¹æ³•ï¼ˆ1ï¼‰" class="headerlink" title="æ–¹æ³•ï¼ˆ1ï¼‰"></a>æ–¹æ³•ï¼ˆ1ï¼‰</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(&lt;loop_var&gt; RANGE &lt;stop&gt;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”å¦‚</span></span><br><span class="line"><span class="keyword">foreach</span>(item RANGE <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current iteration: $&#123;item&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">current iteration: <span class="number">0</span></span><br><span class="line">current iteration: <span class="number">1</span></span><br><span class="line">current iteration: <span class="number">2</span></span><br><span class="line">current iteration: <span class="number">3</span></span><br><span class="line">current iteration: <span class="number">4</span></span><br><span class="line">current iteration: <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p><u>åœ¨å¯¹ä¸€ä¸ªæ•´æ•°åŒºé—´è¿›è¡Œéå†çš„æ—¶å€™ï¼Œå¾—åˆ°çš„èŒƒå›´æ˜¯é—­åŒºé—´<code>[0ï¼Œstop]</code>ï¼Œæ­¥é•¿ä¸º<code>1</code>ã€‚</u></p>
<h5 id="æ–¹æ³•ï¼ˆ2ï¼‰"><a href="#æ–¹æ³•ï¼ˆ2ï¼‰" class="headerlink" title="æ–¹æ³•ï¼ˆ2ï¼‰"></a>æ–¹æ³•ï¼ˆ2ï¼‰</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(&lt;loop_var&gt; RANGE &lt;start&gt; &lt;stop&gt; [&lt;step&gt;])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”å¦‚</span></span><br><span class="line"><span class="keyword">foreach</span>(item RANGE <span class="number">10</span> <span class="number">30</span> <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current iteration: $&#123;item&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">current iteration: <span class="number">10</span></span><br><span class="line">current iteration: <span class="number">15</span></span><br><span class="line">current iteration: <span class="number">20</span></span><br><span class="line">current iteration: <span class="number">25</span></span><br><span class="line">current iteration: <span class="number">30</span></span><br></pre></td></tr></table></figure>
<p><u>æŒ‡å®šæ•´æ•°é—­åŒºé—´èŒƒå›´<code>[start, end]</code>ï¼Œå¹¶æŒ‡å®šæ­¥é•¿<code>step</code>(é»˜è®¤<code>1</code>ï¼Œå¯ä¸è®¾ç½®)</u></p>
<h5 id="æ–¹æ³•ï¼ˆ3ï¼‰"><a href="#æ–¹æ³•ï¼ˆ3ï¼‰" class="headerlink" title="æ–¹æ³•ï¼ˆ3ï¼‰"></a>æ–¹æ³•ï¼ˆ3ï¼‰</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(&lt;loop_var&gt; IN [LISTS [&lt;lists&gt;]] [ITEMS [&lt;items&gt;]])</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯<code>foreach</code>çš„å¦ä¸€ä¸ªå˜ä½“ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æˆ‘ä»¬å¯ä»¥å¯¹æ›´åŠ å¤æ‚çš„æ•°æ®è¿›è¡Œéå†ï¼Œå‰ä¸¤ç§æ–¹å¼åªé€‚ç”¨äºå¯¹æŸä¸ªæ­£æ•´æ•°èŒƒå›´å†…çš„éå†ã€‚</p>
<ul>
<li><code>IN</code>ï¼šå…³é”®å­—ï¼Œè¡¨ç¤ºåœ¨<code>LISTS/ITEMS</code>é‡Œ</li>
<li><code>LISTS</code>ï¼šå…³é”®å­—ï¼Œå¯¹åº”çš„æ˜¯åˆ—è¡¨<code>list</code>ï¼Œå¯é€šè¿‡<code>set</code>ã€<code>list</code>è·å¾—</li>
<li><code>ITEMS</code>ï¼šå…³é”®å­—ï¼Œå¯¹åº”çš„ä¹Ÿæ˜¯<code>list</code></li>
<li><code>loop_var</code>ï¼šå­˜å‚¨æ¯æ¬¡å¾ªç¯å–å‡ºçš„å€¼</li>
</ul>
<p>ä¾‹(1): ä½¿ç”¨<code>LISTS</code>å…³é”®å­—éå†</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(WORD a b c <span class="string">&quot;d e f&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(NAME zhang chao frodo)</span><br><span class="line"></span><br><span class="line"><span class="comment"># listéå†</span></span><br><span class="line"><span class="keyword">foreach</span>(item IN LISTS WORD NAME)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current value: $&#123;item&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">current value: a</span><br><span class="line">current value: b</span><br><span class="line">current value: c</span><br><span class="line">current value: d e f</span><br><span class="line">current value: zhang</span><br><span class="line">current value: chao</span><br><span class="line">current value: frodo</span><br></pre></td></tr></table></figure>

<p>ä¾‹(2): ä½¿ç”¨<code>ITEMS</code>å…³é”®å­—éå†</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(WORD a b c <span class="string">&quot;d e f&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(NAME zhang chao frodo)</span><br><span class="line"></span><br><span class="line"><span class="comment"># listéå†</span></span><br><span class="line"><span class="keyword">foreach</span>(item IN ITEMS <span class="variable">$&#123;WORD&#125;</span> <span class="variable">$&#123;NAME&#125;</span>)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current value: $&#123;item&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">current value: a</span><br><span class="line">current value: b</span><br><span class="line">current value: c</span><br><span class="line">current value: d e f</span><br><span class="line">current value: zhang</span><br><span class="line">current value: chao</span><br><span class="line">current value: frodo</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ITEMS</code>ä¸<code>LISTS</code>çš„åŒºåˆ«åœ¨äºéœ€è¦é€šè¿‡<code>$&#123;&#125;</code>å°†åˆ—è¡¨ä¸­çš„å€¼å–å‡º</li>
<li><u>é€šè¿‡<code>set</code>ç»„ç»‡åˆ—è¡¨çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸­æœ‰ç©ºæ ¼ï¼Œéœ€è¦é€šè¿‡åŒå¼•å·å°†å…¶åŒ…è£¹èµ·æ¥</u></li>
</ul>
<h5 id="æ–¹æ³•4"><a href="#æ–¹æ³•4" class="headerlink" title="æ–¹æ³•4"></a>æ–¹æ³•4</h5><p><u>è¦æ±‚<code>CMake</code>ç‰ˆæœ¬<code>&gt;=3.17</code></u></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span>(&lt;loop_var&gt;... IN ZIP_LISTS &lt;lists&gt;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>loop_var</code>ï¼šå­˜å‚¨æ¯æ¬¡å¾ªç¯å–å‡ºçš„å€¼ï¼Œå¯ä»¥æ ¹æ®è¦éå†çš„åˆ—è¡¨çš„æ•°é‡æŒ‡å®šå¤šä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨å¯¹åº”çš„åˆ—è¡¨å½“å‰å–å‡ºçš„é‚£ä¸ªå€¼<ul>
<li>å¦‚æœæŒ‡å®šäº†<u>å¤šä¸ªå˜é‡åï¼Œå®ƒä»¬çš„æ•°é‡åº”ç­‰äºè¦éå†çš„åˆ—è¡¨æ•°é‡</u></li>
<li>å¦‚æœåªç»™å‡ºäº†ä¸€ä¸ª<code>loop_var</code>ï¼Œé‚£ä¹ˆå®ƒå°†ä¸€ç³»åˆ—çš„<code>loop_var_N</code>å˜é‡æ¥å­˜å‚¨å¯¹åº”åˆ—è¡¨ä¸­çš„å½“å‰é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´**<code>loop_var_0</code>å¯¹åº”ç¬¬ä¸€ä¸ªåˆ—è¡¨**ï¼Œ<code>loop_var_1</code>å¯¹åº”ç¬¬äºŒä¸ªåˆ—è¡¨ï¼Œä»¥æ­¤ç±»æ¨â€¦</li>
<li>å¦‚æœéå†çš„å¤šä¸ªåˆ—è¡¨ä¸­ä¸€ä¸ªåˆ—è¡¨è¾ƒçŸ­ï¼Œå½“å®ƒéå†å®Œæˆä¹‹åå°†ä¸ä¼šå†å‚ä¸åç»­çš„éå†ï¼ˆå› ä¸ºå…¶å®ƒåˆ—è¡¨è¿˜æ²¡æœ‰éå†å®Œï¼‰</li>
</ul>
</li>
<li><code>ZIP_LISTS</code>ï¼šå…³é”®å­—ï¼Œå¯¹åº”çš„æ˜¯åˆ—è¡¨<code>list</code>ï¼Œé€šè¿‡<code>set</code>ã€<code>list</code>å¯ä»¥è·å¾—</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.17</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡listç»™åˆ—è¡¨æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">list</span>(APPEND WORD hello world <span class="string">&quot;hello world&quot;</span>)</span><br><span class="line"><span class="keyword">list</span>(APPEND NAME zhang chao frodo cz)</span><br><span class="line"><span class="comment"># éå†åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">foreach</span>(item1 item2 IN ZIP_LISTS WORD NAME)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current iteration: item1 = $&#123;item1&#125;, item2 = $&#123;item2&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;=============================&quot;</span>)</span><br><span class="line"><span class="comment"># éå†åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">foreach</span>(item  IN ZIP_LISTS WORD NAME)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;current iteration: item1 = $&#123;item_0&#125;, item2 = $&#123;item_1&#125;&quot;</span> )</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">current iteration: item1 = hello, item2 = zhang</span><br><span class="line">current iteration: item1 = world, item2 = chao</span><br><span class="line">current iteration: item1 = hello world, item2 = frodo</span><br><span class="line">current iteration: item1 = , item2 = cz</span><br><span class="line">=============================</span><br><span class="line">current iteration: item1 = hello, item2 = zhang</span><br><span class="line">current iteration: item1 = world, item2 = chao</span><br><span class="line">current iteration: item1 = hello world, item2 = frodo</span><br><span class="line">current iteration: item1 = , item2 = cz</span><br></pre></td></tr></table></figure>

<p><code>foreach</code>å¾ªç¯ç‰¹åˆ«é€‚åˆç”¨æ¥éå†ä¸€ä¸ªåˆ—è¡¨ã€‚å‡è®¾ä½ æœ‰ä¸€å †æºæ–‡ä»¶ï¼Œæƒ³è¦å¯¹æ¯ä¸ªæ–‡ä»¶åšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æ‰“å°æ–‡ä»¶åï¼Œæˆ–è€…è®¾ç½®ç¼–è¯‘é€‰é¡¹ã€‚<code>foreach</code>å¯ä»¥å¸®ä½ è‡ªåŠ¨éå†è¿™äº›æ–‡ä»¶ï¼Œé€ä¸ªå¤„ç†ã€‚</p>
<h4 id="3-2-2-while"><a href="#3-2-2-while" class="headerlink" title="3.2.2 while"></a>3.2.2 while</h4><p>é™¤äº†ä½¿ç”¨<code>foreach</code>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>while</code>å¾ªç¯ï¼Œå…³äºå¾ªç¯ç»“æŸå¯¹åº”çš„æ¡ä»¶åˆ¤æ–­çš„ä¹¦å†™æ ¼å¼å’Œ<code>if/elseif</code>æ˜¯ä¸€æ ·çš„ã€‚<code>while</code>çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(&lt;condition&gt;)</span><br><span class="line">    &lt;commands&gt;</span><br><span class="line"><span class="keyword">endwhile</span>()</span><br></pre></td></tr></table></figure>
<p><code>while</code>å¾ªç¯æ¯”è¾ƒç®€å•ï¼Œåªè¦æŒ‡å®šå¾ªç¯ç»“æŸæ¡ä»¶ï¼Œæ ¹æ®ä¸€ä¸ªæ¡ä»¶åå¤æ‰§è¡Œï¼Œç›´åˆ°æ¡ä»¶ä¸å†æ»¡è¶³ä¸ºæ­¢ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.5</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span>)</span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ NAME</span></span><br><span class="line"><span class="keyword">set</span>(NAME zhang chao frodo cz)</span><br><span class="line"><span class="comment"># å¾—åˆ°åˆ—è¡¨é•¿åº¦</span></span><br><span class="line"><span class="keyword">list</span>(LENGTH NAME LEN)</span><br><span class="line"><span class="comment"># å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$&#123;LEN&#125;</span> <span class="keyword">GREATER</span> <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;names = $&#123;NAME&#125;, len = $&#123;LEN&#125;&quot;</span>)</span><br><span class="line">    <span class="comment"># å¼¹å‡ºåˆ—è¡¨å¤´éƒ¨å…ƒç´ </span></span><br><span class="line">    <span class="keyword">list</span>(POP_FRONT NAME)</span><br><span class="line">    <span class="comment"># æ›´æ–°åˆ—è¡¨é•¿åº¦</span></span><br><span class="line">    <span class="keyword">list</span>(LENGTH NAME LEN)</span><br><span class="line"><span class="comment">#endwhile()</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">names = zhang;chao;frodo;cz, len = 4</span><br><span class="line">names = chao;frodo;cz, len = 3</span><br><span class="line">names = frodo;cz, len = 2</span><br><span class="line">names = cz, len = 1</span><br></pre></td></tr></table></figure>

<h2 id="4-ä¾èµ–ç®¡ç†"><a href="#4-ä¾èµ–ç®¡ç†" class="headerlink" title="4. ä¾èµ–ç®¡ç†"></a>4. ä¾èµ–ç®¡ç†</h2><p>éšç€é¡¹ç›®è§„æ¨¡çš„å¢é•¿ï¼Œä¸ºäº†é¿å…é‡å¤é€ è½®å­ï¼Œéš¾å…ä¼šç”¨åˆ°ä¸€äº›åŠŸèƒ½å¼ºå¤§çš„å¤–éƒ¨ä¾èµ–åº“ï¼Œæ¯”å¦‚<code>Boost</code>ã€<code>protobuf</code>ã€<code>OpenCV</code>ç­‰ã€‚<code>CMake</code>æä¾›äº†ä¸€ç³»åˆ—å·¥å…·é“¾æ¥è§£å†³ç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†ã€‚</p>
<h3 id="4-1-æŸ¥æ‰¾å’Œä½¿ç”¨å¤–éƒ¨åº“"><a href="#4-1-æŸ¥æ‰¾å’Œä½¿ç”¨å¤–éƒ¨åº“" class="headerlink" title="4.1 æŸ¥æ‰¾å’Œä½¿ç”¨å¤–éƒ¨åº“"></a>4.1 æŸ¥æ‰¾å’Œä½¿ç”¨å¤–éƒ¨åº“</h3><p><code>CMake</code>æä¾›<code>find_package()</code>å‘½ä»¤ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ‰¾åˆ°æ‰€éœ€çš„å¤–éƒ¨åº“ï¼Œå¹¶é…ç½®å¥½åº“çš„è·¯å¾„ã€å¤´æ–‡ä»¶ã€åº“æ–‡ä»¶çš„é“¾æ¥ã€‚<br>æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›å¼•å…¥<code>Boost</code>åº“ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾ Boost åº“ï¼Œè¦æ±‚ç‰ˆæœ¬ &gt;= 1.70</span></span><br><span class="line"><span class="keyword">find_package</span>(Boost <span class="number">1.70</span> REQUIRED)</span><br></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç å‘Šè¯‰<code>CMake</code>ï¼šâ€œå¯»æ‰¾<code>Boost</code>åº“ï¼Œç‰ˆæœ¬è‡³å°‘æ˜¯1.70ï¼Œæ‰¾ä¸åˆ°çš„è¯å°±æŠ¥é”™â€ã€‚å¦‚æœ<code>CMake</code>æˆåŠŸæ‰¾åˆ°äº†<code>Boost</code>ï¼Œåˆ™è‡ªåŠ¨è®¾ç½®ä¸€äº›å˜é‡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>Boost_INCLUDE_DIRS</code>ï¼š<code>Boost</code>çš„å¤´æ–‡ä»¶è·¯å¾„</li>
<li><code>Boost_LIBRARIES</code>ï¼š<code>Boost</code>çš„åº“æ–‡ä»¶è·¯å¾„<br>ç„¶åï¼Œä½ å¯ä»¥å°†è¿™äº›ä¿¡æ¯ä¼ ç»™<code>CMake</code>ï¼Œå½“ä½ çš„æŸä¸ªç›®æ ‡æ–‡ä»¶<code>my_target</code>éœ€è¦ç”¨åˆ°<code>Boost</code>æ—¶ï¼š</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‘Šè¯‰ CMakeï¼Œmy_target éœ€è¦ä½¿ç”¨ Boost çš„å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># æŠŠ Boost çš„å¤´æ–‡ä»¶è·¯å¾„åŠ åˆ°ç¼–è¯‘å™¨çš„æœç´¢è·¯å¾„ä¸­ï¼Œç¡®ä¿ç¼–è¯‘æ—¶èƒ½å¤Ÿæ‰¾åˆ° Boost çš„å¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">target_include_directories</span>(my_target PRIVATE <span class="variable">$&#123;Boost_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘Šè¯‰ CMakeï¼Œmy_target éœ€è¦é“¾æ¥ Boost åº“</span></span><br><span class="line">æŠŠ Boost çš„åº“æ–‡ä»¶é“¾æ¥åˆ° my_targetï¼Œç¡®ä¿ç”Ÿæˆçš„ç¨‹åºèƒ½æ­£ç¡®é“¾æ¥åˆ° Boost åº“</span><br><span class="line"><span class="keyword">target_link_libraries</span>(my_target PRIVATE <span class="variable">$&#123;Boost_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-è‡ªå®šä¹‰è·¯å¾„æŸ¥æ‰¾ä¾èµ–åº“"><a href="#4-2-è‡ªå®šä¹‰è·¯å¾„æŸ¥æ‰¾ä¾èµ–åº“" class="headerlink" title="4.2 è‡ªå®šä¹‰è·¯å¾„æŸ¥æ‰¾ä¾èµ–åº“"></a>4.2 è‡ªå®šä¹‰è·¯å¾„æŸ¥æ‰¾ä¾èµ–åº“</h3><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼šæŸäº›åº“å¹¶æ²¡æœ‰å®‰è£…åœ¨ç³»ç»Ÿé»˜è®¤è·¯å¾„ä¸‹(å¦‚<code>/usr/local/lib</code>æˆ–<code>/usr/lib</code>)ï¼Œå¯¼è‡´<code>find_package()</code>æ— æ³•æ‰¾åˆ°å®ƒä»¬ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦å‘Šè¯‰<code>CMake</code>å»å“ªé‡Œå¯»æ‰¾è¿™äº›åº“ã€‚<br><code>find_package()</code>çš„é»˜è®¤æŸ¥æ‰¾é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·æŒ‡å®šçš„æç¤ºè·¯å¾„<ul>
<li>å¦‚æœåœ¨<code>find_package()</code>ä¸­ä½¿ç”¨äº†<code>HINTS</code>æˆ–<code>PATHS</code>å‚æ•°ï¼Œè¿™äº›è·¯å¾„ä¼šè¢«ä¼˜å…ˆè€ƒè™‘ã€‚</li>
</ul>
</li>
<li>å…¨å±€é…ç½®çš„è·¯å¾„<ul>
<li><code>CMAKE_PREFIX_PATH</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæˆ–<code>CMakeLists.txt</code>é…ç½®</li>
<li>åº“æ”¯æŒçš„ç‰¹å®šç¯å¢ƒå˜é‡ï¼Œå¦‚ï¼š<ul>
<li><code>Boost</code>æ”¯æŒ<code>BOOST_ROOT</code>ç¯å¢ƒå˜é‡ï¼›</li>
<li><code>OpenCV</code>æ”¯æŒ<code>OpenCV_DIR</code>ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>åº“è‡ªå¸¦çš„é…ç½®æ–‡ä»¶è·¯å¾„<blockquote>
<p>å¦‚æœåº“æ˜¯ä½¿ç”¨<code>CMake</code>æ„å»ºçš„ï¼Œé€šå¸¸ä¼šè‡ªå¸¦<code>&lt;PackageName&gt;Config.cmake</code>æˆ–<code>&lt;lowercasename&gt;-config.cmake</code>æ–‡ä»¶ï¼Œä¸€èˆ¬ä½äºï¼š</p>
<ul>
<li>åº“å®‰è£…è·¯å¾„ä¸‹çš„<code>lib/cmake/&lt;PackageName&gt;</code></li>
<li>ç”¨æˆ·å®šä¹‰çš„å®‰è£…ç›®å½•<br><code>CMake</code>ä¼šæ ¹æ®è¿™äº›é…ç½®æ–‡ä»¶æä¾›çš„ä¿¡æ¯å®šä½å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ã€‚</li>
</ul>
</blockquote>
</li>
<li>æ ‡å‡†ç³»ç»Ÿè·¯å¾„<blockquote>
<p>å¦‚æœä»¥ä¸Šè·¯å¾„éƒ½æ‰¾ä¸åˆ°ï¼ŒCMake ä¼šæŸ¥æ‰¾ç³»ç»Ÿé»˜è®¤çš„åº“è·¯å¾„ï¼š</p>
<ul>
<li>Linuxï¼š<code>/usr/lib</code>ï¼Œ<code>/usr/local/lib</code>ï¼›</li>
<li>macOSï¼š<code>/opt/local/lib</code>ï¼Œ<code>/usr/local/lib</code>ï¼›</li>
<li>Windowsï¼š<code>C:/Program Files/</code>ï¼Œ<code>C:/Program Files (x86)/</code>ã€‚</li>
</ul>
</blockquote>
</li>
</ol>
<p>å¦‚æœä¸Šè¿°è·¯å¾„ä¸­éƒ½æ‰¾ä¸åˆ°ç¬¦åˆè¦æ±‚çš„åº“ï¼Œ<code>CMake</code>ä¼šæŠ¥é”™ï¼Œåœæ­¢é…ç½®è¿‡ç¨‹ã€‚</p>
<h3 id="4-3-CMakeè‡ªå®šä¹‰è·¯å¾„ç¤ºä¾‹"><a href="#4-3-CMakeè‡ªå®šä¹‰è·¯å¾„ç¤ºä¾‹" class="headerlink" title="4.3 CMakeè‡ªå®šä¹‰è·¯å¾„ç¤ºä¾‹"></a>4.3 CMakeè‡ªå®šä¹‰è·¯å¾„ç¤ºä¾‹</h3><h4 id="4-3-1-ä½¿ç”¨HINTSæˆ–PATHSæä¾›è·¯å¾„æç¤º"><a href="#4-3-1-ä½¿ç”¨HINTSæˆ–PATHSæä¾›è·¯å¾„æç¤º" class="headerlink" title="4.3.1 ä½¿ç”¨HINTSæˆ–PATHSæä¾›è·¯å¾„æç¤º"></a>4.3.1 ä½¿ç”¨<code>HINTS</code>æˆ–<code>PATHS</code>æä¾›è·¯å¾„æç¤º</h4><ul>
<li><code>HINTS</code>ï¼šè·¯å¾„æç¤ºï¼Œæä¾›é¢å¤–æŸ¥æ‰¾è·¯å¾„ï¼Œä¸æ”¹å˜é»˜è®¤æœç´¢é€»è¾‘ï¼›</li>
<li><code>PATHS</code>ï¼šæ˜ç¡®è·¯å¾„ï¼Œç›´æ¥è¦†ç›–é»˜è®¤è·¯å¾„æŸ¥æ‰¾ï¼Œ<code>CMake</code>ä¼šä¼˜å…ˆåœ¨è¿™äº›è·¯å¾„ä¸­æŸ¥æ‰¾ã€‚</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(MyLib REQUIRED HINTS /custom/path/to/mylib)</span><br><span class="line">æˆ–</span><br><span class="line"><span class="keyword">find_package</span>(MyLib REQUIRED PATHS /custom/path/to/mylib)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (MyLib_FOUND) <span class="comment"># MyLib_FOUND ä¸º TRUEï¼šè¡¨ç¤ºæˆåŠŸæ‰¾åˆ° MyLib</span></span><br><span class="line">    <span class="keyword">target_include_directories</span>(my_target PRIVATE <span class="variable">$&#123;MyLib_INCLUDE_DIRS&#125;</span>)</span><br><span class="line">    <span class="keyword">target_link_libraries</span>(my_target PRIVATE <span class="variable">$&#123;MyLib_LIBRARIES&#125;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;MyLib not found!&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>

<h4 id="4-3-2-è®¾ç½®CMAKE-PREFIX-PATHå˜é‡"><a href="#4-3-2-è®¾ç½®CMAKE-PREFIX-PATHå˜é‡" class="headerlink" title="4.3.2 è®¾ç½®CMAKE_PREFIX_PATHå˜é‡"></a>4.3.2 è®¾ç½®<code>CMAKE_PREFIX_PATH</code>å˜é‡</h4><p><code>CMAKE_PREFIX_PATH</code>æ˜¯<code>CMake</code>çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒå‘Šè¯‰<code>CMake</code>åœ¨æ ‡å‡†è·¯å¾„ä¹‹å¤–ï¼Œè¿˜è¦å»å“ªäº›åœ°æ–¹æŸ¥æ‰¾ä¾èµ–åº“ã€‚ä½ åªéœ€è¦æŠŠåº“æ‰€åœ¨çš„è·¯å¾„åŠ åˆ°è¿™ä¸ªå˜é‡é‡Œï¼Œ<code>find_package()</code>å°±èƒ½é¡ºåˆ©æ‰¾åˆ°å®ƒã€‚</p>
<ul>
<li>é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šè·¯å¾„ï¼Œåœ¨è¿è¡Œ<code>CMake</code>æ—¶è®¾ç½®ï¼š</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ /custom/path/to/mylib ä»¥åŠå®ƒçš„å­ç›®å½•ä¸­æŸ¥æ‰¾ MyLibï¼ŒåŒ…æ‹¬å¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶</span></span><br><span class="line">cmake .. -DCMAKE_PREFIX_PATH=/custom/path/to/mylib</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœä¸æƒ³æ¯æ¬¡è¿è¡Œå‘½ä»¤éƒ½æŒ‡å®šè·¯å¾„ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>CMake</code>è„šæœ¬é‡Œè®¾ç½®ï¼š</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_PREFIX_PATH <span class="string">&quot;/custom/path/to/mylib&quot;</span>)</span><br><span class="line"><span class="keyword">find_package</span>(MyLib REQUIRED)</span><br></pre></td></tr></table></figure>

<h4 id="4-3-3-ä½¿ç”¨find-path-æŸ¥æ‰¾å¤´æ–‡ä»¶"><a href="#4-3-3-ä½¿ç”¨find-path-æŸ¥æ‰¾å¤´æ–‡ä»¶" class="headerlink" title="4.3.3 ä½¿ç”¨find_path()æŸ¥æ‰¾å¤´æ–‡ä»¶"></a>4.3.3 ä½¿ç”¨<code>find_path()</code>æŸ¥æ‰¾å¤´æ–‡ä»¶</h4><p>å½“åº“æ²¡æœ‰æä¾›Config.cmakeæ—¶ï¼Œ<code>find_package()</code>å°†æ— æ³•ç”Ÿæ•ˆï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨<code>find_path()</code>æŸ¥æ‰¾å¤´æ–‡ä»¶ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_path</span>(MYLIB_INCLUDE_PATH NAMES mylib.h PATHS /custom/path/to/<span class="keyword">include</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>NAMES</code>ï¼šå¤´æ–‡ä»¶å</li>
<li><code>PATHS</code>ï¼šæŒ‡å®šæŸ¥æ‰¾è·¯å¾„<br>å¦‚æœæ‰¾åˆ°ï¼Œ<code>MYLIB_INCLUDE_PATH</code>ä¼šä¿å­˜å¤´æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå¦‚<code>/custom/path/to/include</code>ã€‚</li>
</ul>
<h4 id="4-3-4-ä½¿ç”¨find-library-æŸ¥æ‰¾åº“æ–‡ä»¶"><a href="#4-3-4-ä½¿ç”¨find-library-æŸ¥æ‰¾åº“æ–‡ä»¶" class="headerlink" title="4.3.4 ä½¿ç”¨find_library()æŸ¥æ‰¾åº“æ–‡ä»¶"></a>4.3.4 ä½¿ç”¨<code>find_library()</code>æŸ¥æ‰¾åº“æ–‡ä»¶</h4><p>ä½¿ç”¨<code>find_library()</code>å¯ä»¥æŸ¥æ‰¾åº“æ–‡ä»¶ï¼Œå¦‚<code>.so</code>ï¼ˆLinuxï¼‰ã€<code>.a</code>ï¼ˆé™æ€åº“ï¼‰ç­‰ã€‚è¯­æ³•ä¸<code>find_path()</code>ç±»ä¼¼ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_library</span>(MYLIB_PATH NAMES mylib PATHS /custom/path/to/lib)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>NAMES</code>ï¼šè¦æ‰¾çš„åº“åï¼Œ<code>CMake</code>ä¼šè‡ªåŠ¨åŒ¹é…åç¼€ï¼ˆå¦‚<code>.so</code>æˆ–<code>.a</code>ï¼‰</li>
<li><code>PATHS</code>ï¼šæŒ‡å®šæŸ¥æ‰¾è·¯å¾„<br>å¦‚æœæ‰¾åˆ°ï¼Œ<code>MYLIB_PATH</code>ä¼šä¿å­˜åº“æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå¦‚<code>/custom/path/to/lib/libmylib.so</code>ã€‚</li>
</ul>
<p>å®Œæ•´ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰¾åº“å’Œå¤´æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">find_library</span>(MYLIB_PATH NAMES mylib PATHS /custom/path/to/lib)</span><br><span class="line"><span class="keyword">find_path</span>(MYLIB_INCLUDE_PATH NAMES mylib.h PATHS /custom/path/to/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°</span></span><br><span class="line"><span class="keyword">if</span> (MYLIB_PATH <span class="keyword">AND</span> MYLIB_INCLUDE_PATH)</span><br><span class="line">    <span class="keyword">target_include_directories</span>(my_target PRIVATE <span class="variable">$&#123;MYLIB_INCLUDE_PATH&#125;</span>)</span><br><span class="line">    <span class="keyword">target_link_libraries</span>(my_target PRIVATE <span class="variable">$&#123;MYLIB_PATH&#125;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">    <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;Could not find mylib or its headers!&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>

<h3 id="4-4-ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼švcpkg-å’Œ-Conan"><a href="#4-4-ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼švcpkg-å’Œ-Conan" class="headerlink" title="4.4 ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼švcpkg å’Œ Conan"></a>4.4 ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼švcpkg å’Œ Conan</h3><p>ä¸Šæ–‡æåˆ°å¦‚ä½•ç”¨<code>find_package()</code>æ‰¾åº“ï¼Œä»¥åŠæ€ä¹ˆè®¾ç½®è‡ªå®šä¹‰è·¯å¾„è§£å†³é‚£äº›â€œæ‰¾ä¸åˆ°åº“â€çš„é—®é¢˜ã€‚è¿™ä¸ªæ–¹æ³•è™½ç„¶å¥½ç”¨ï¼Œä½†æ€»å½’è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œæ¯”å¦‚ä½ å¾—è‡ªå·±ä¸‹è½½åº“ï¼Œè‡ªå·±å®‰è£…ï¼Œè¿˜å¾—çŸ¥é“åº“çš„è·¯å¾„åœ¨å“ªã€‚éšç€é¡¹ç›®ä¾èµ–è¶Šæ¥è¶Šå¤šï¼Œå¸¸å¸¸ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>æ¯”å¦‚ä¸åŒå¹³å°ä¸‹ï¼Œåº“çš„å®‰è£…è·¯å¾„ä¸ä¸€æ ·ï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°é…ç½®</li>
<li>æŸäº›åº“éœ€è¦å»å®˜ç½‘ä¸‹è½½ã€è§£å‹ã€ç¼–è¯‘ï¼Œè€—æ—¶åˆè´¹åŠ›</li>
<li>å›¢é˜Ÿé‡Œæ¯ä¸ªäººçš„ç¯å¢ƒéƒ½ä¸åŒï¼Œç¼–è¯‘ä¸è°ƒè¯•æ—¶éœ€è¦è€—è´¹å¾ˆå¤šæ—¶é—´ä¸ç²¾åŠ›debug</li>
</ul>
<p><u><strong>åŒ…ç®¡ç†å™¨</strong></u>å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨ä¸‹è½½ã€å®‰è£…å’Œé…ç½®å¥½ä¾èµ–åº“ï¼Œç”šè‡³è¿˜èƒ½å¸®å¿™å¤„ç†å¤æ‚çš„ç‰ˆæœ¬å…¼å®¹é—®é¢˜ã€‚ä»¥ä¸‹ä»‹ç»ä¸¤ä¸ªæµè¡Œçš„åŒ…ç®¡ç†å™¨ã€‚</p>
<h4 id="4-4-1-vcpkg"><a href="#4-4-1-vcpkg" class="headerlink" title="4.4.1 vcpkg"></a>4.4.1 <code>vcpkg</code></h4><p><code>vcpkg</code>æ˜¯å¾®è½¯å¼€æºçš„è·¨å¹³å°åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥è½»æ¾å®‰è£…ç®¡ç†å„ç§C++åº“ã€‚ä»¥<code>OpenCV</code>ä¸ºä¾‹ï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… OpenCV åº“</span></span><br><span class="line">vcpkg install opencv</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆåï¼Œåªè¦åœ¨<code>CMakeLists.txt</code>ä¸­è®¾ç½®<code>vcpkg</code>çš„å·¥å…·é“¾æ–‡ä»¶è·¯å¾„ï¼Œå°±å¯ä»¥åƒå¹³å¸¸ä¸€æ ·ç”¨<code>find_package()</code>æ¥æŸ¥æ‰¾åº“ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® vcpkg çš„å·¥å…·é“¾æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_TOOLCHAIN_FILE <span class="string">&quot;path_to_vcpkg/scripts/buildsystems/vcpkg.cmake&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ OpenCV åº“</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenCV REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾æ¥åˆ°ä½ çš„ç›®æ ‡</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(my_target PRIVATE <span class="variable">$&#123;OpenCV_LIBS&#125;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="4-4-2-Conan"><a href="#4-4-2-Conan" class="headerlink" title="4.4.2 Conan"></a>4.4.2 <code>Conan</code></h4><p><code>Conan</code>ä¸<code>vcpkg</code>ç±»ä¼¼ï¼Œä½†ä¾èµ–äº<code>Python 3.6</code>æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pip install conan</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éªŒè¯ Conan æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">conan --version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ Conan å®‰è£… Boost 1.70</span></span><br><span class="line">conan install boost/1.70.0@</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å®Œæˆåï¼Œåªè¦åœ¨<code>CMakeLists.txt</code>ä¸­è®¾ç½®<code>Conan</code>çš„å·¥å…·é“¾æ–‡ä»¶è·¯å¾„ï¼Œå¹¶å‘Šè¯‰<code>CMake</code>ä½¿ç”¨<code>Conan</code>ç®¡ç†ä¾èµ–ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® Conan çš„å·¥å…·é“¾æ–‡ä»¶ï¼šåŠ è½½ç”± Conan ç”Ÿæˆçš„ conanbuildinfo.cmake æ–‡ä»¶ã€‚</span></span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/conanbuildinfo.cmake)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨åŠ è½½çš„ conanbuildinfo.cmake æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œè®¾ç½®é¡¹ç›®çš„ä¾èµ–ç¯å¢ƒã€‚</span></span><br><span class="line">conan_basic_setup()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ Boost åº“</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(my_target PRIVATE Boost::Boost)</span><br></pre></td></tr></table></figure>

<h3 id="4-5-ä½¿ç”¨Git-Submoduleæ¥ç®¡ç†ä¾èµ–"><a href="#4-5-ä½¿ç”¨Git-Submoduleæ¥ç®¡ç†ä¾èµ–" class="headerlink" title="4.5 ä½¿ç”¨Git Submoduleæ¥ç®¡ç†ä¾èµ–"></a>4.5 ä½¿ç”¨Git Submoduleæ¥ç®¡ç†ä¾èµ–</h3><p>æœ‰æ—¶å€™ï¼Œä½ çš„å¤–éƒ¨ä¾èµ–åº“æ˜¯é€šè¿‡<code>Git</code>ä»“åº“ç®¡ç†çš„ï¼Œå°¤å…¶æ˜¯ä¸€äº›å¼€æºåº“ã€‚<code>CMake</code>èƒ½å¤Ÿä¸<code>Git</code>å®Œç¾é…åˆï¼Œç›´æ¥æŠŠ<code>Git</code>ä»“åº“ä½œä¸ºå­æ¨¡å—æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ  Git å­æ¨¡å—</span></span><br><span class="line">git submodule add https://github.com/boostorg/boost.git thirdParty/boost</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨<code>CMake</code>ä¸­é€šè¿‡<code>add_subdirectory()</code>å¼•å…¥è¯¥å­æ¨¡å—ï¼Œåœ¨æ„å»ºé¡¹ç›®æ—¶ï¼Œ<code>CMake</code>ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶æ„å»ºå¤–éƒ¨ä¾èµ–åº“ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼•å…¥ Git å­æ¨¡å—</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(thirdParty/boost)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ boost åº“</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(my_target PRIVATE boost)</span><br></pre></td></tr></table></figure>

<h2 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h2><ul>
<li>ä½¿ç”¨æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ä¸¤ç§æµç¨‹æ§åˆ¶æ–¹å¼ï¼Œçµæ´»é…ç½®<code>CMakeLists.txt</code>ï¼›</li>
<li>ä½¿ç”¨<code>find_package()</code>ã€åŒ…ç®¡ç†å™¨ã€<code>Git Submodule</code>è§£å†³å¤–éƒ¨åº“çš„é›†æˆé—®é¢˜ã€‚</li>
</ul>
<h2 id="6-ä¸‹ç¯‡é¢„å‘Š"><a href="#6-ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="6. ä¸‹ç¯‡é¢„å‘Š"></a>6. ä¸‹ç¯‡é¢„å‘Š</h2><p>æ„å»ºä¸è°ƒè¯•<br>é…ç½®ä¼˜åŒ–</p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-01-24</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Zhang Chao</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/CMake/'>
                            CMake
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E5%B7%A5%E5%85%B7/'>
                            å·¥å…·
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2025/01/24/CMake-notes-1/">CMakeæ•™ç¨‹ï¼ˆä¸€ï¼‰ï¼šCMakeåŸºç¡€ç”¨æ³•</a>
                    </span>
                
            </div>
    
        
    

    
        
    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
         
    </div>
    
        

    
    
    
    </div>


     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 2025 Cz 

            
                

            
                
                    / <a href="/contact/"> è”ç³» </a>
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠäº¦ä½™å¿ƒä¹‹æ‰€å–„å…®ï¼Œè™½ä¹æ­»å…¶çŠ¹æœªæ‚”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>